<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>LoomConnection (class) &#8212; loompy 3.0.6 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="LayerManager (class)" href="layer_manager.html" />
    <link rel="prev" title="combine (function)" href="combine.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-light navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><span><img src="../_static/Loom_icon.png"></span>
          Loom</a>
        <span class="navbar-text navbar-version pull-left"><b>3.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="http://loompy.org">loompy.org</a></li>
                <li><a href="https://github.com/linnarsson-lab/loompy">GitHub</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Contents <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Loompy documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html#easy-installation">Easy installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html#from-source">From source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/index.html#getting-started">Getting Started</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../semantics/index.html">Understanding the semantics of loom files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../semantics/index.html#connecting-not-loading-and-saving">Connecting, not loading and saving</a></li>
<li class="toctree-l2"><a class="reference internal" href="../semantics/index.html#reading-and-writing">Reading and writing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../semantics/index.html#efficient-indexing-and-compression">Efficient indexing and compression</a></li>
<li class="toctree-l2"><a class="reference internal" href="../semantics/index.html#matrix-and-attributes">Matrix and attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../semantics/index.html#data-types">Data types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../kallisto/index.html">Create from fastq</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../kallisto/index.html#the-loompy-command-line-tool">The <code class="docutils literal notranslate"><span class="pre">loompy</span></code> command-line tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kallisto/index.html#using-the-loompy-fromfq-command">Using the <code class="docutils literal notranslate"><span class="pre">loompy</span> <span class="pre">fromfq</span></code> command</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../apiwalkthrough/index.html">API Walkthrough</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../apiwalkthrough/index.html#creating-and-connecting">Creating and connecting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apiwalkthrough/index.html#manipulate-data">Manipulate data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook/index.html">Cookbook</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#working-with-a-newly-created-file">Working with a newly created file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#loading-attributes-from-pandas">Loading attributes from Pandas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#combining-data-using-scan-and-new">Combining data using scan() and new()</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cookbook/index.html#fitting-an-incremental-pca">Fitting an incremental PCA</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../conventions/index.html">Conventions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../conventions/index.html#single-analysis-per-file">Single analysis per file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conventions/index.html#orientation">Orientation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conventions/index.html#attribute-naming-conventions">Attribute naming conventions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../format/index.html">Loom file format specs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../format/index.html#versions">Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../format/index.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../format/index.html#hdf5-concepts">HDF5 concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../format/index.html#standards">Standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../format/index.html#specification">Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../format/index.html#datatypes">Datatypes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../format/index.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Complete API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="create.html">create (function)</a></li>
<li class="toctree-l2"><a class="reference internal" href="new.html">new (function)</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_from_fastq.html">create_from_fastq (function)</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_from_cellranger.html">create_from_cellranger (function)</a></li>
<li class="toctree-l2"><a class="reference internal" href="connect.html">connect (function)</a></li>
<li class="toctree-l2"><a class="reference internal" href="combine.html">combine (function)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">LoomConnection (class)</a></li>
<li class="toctree-l2"><a class="reference internal" href="layer_manager.html">LayerManager (class)</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory_loom_layer.html">MemoryLoomLayer (class)</a></li>
<li class="toctree-l2"><a class="reference internal" href="loom_layer.html">LoomLayer (class)</a></li>
<li class="toctree-l2"><a class="reference internal" href="view_manager.html">ViewManager (class)</a></li>
<li class="toctree-l2"><a class="reference internal" href="loom_view.html">LoomView (class)</a></li>
<li class="toctree-l2"><a class="reference internal" href="loom_validator.html">LoomValidator (class)</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><div class="list-group">
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Loompy documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../semantics/index.html">Understanding the semantics of loom files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kallisto/index.html">Create from fastq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apiwalkthrough/index.html">API Walkthrough</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cookbook/index.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conventions/index.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../format/index.html">Loom file format specs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Complete API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="create.html">create (function)</a></li>
<li class="toctree-l2"><a class="reference internal" href="new.html">new (function)</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_from_fastq.html">create_from_fastq (function)</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_from_cellranger.html">create_from_cellranger (function)</a></li>
<li class="toctree-l2"><a class="reference internal" href="connect.html">connect (function)</a></li>
<li class="toctree-l2"><a class="reference internal" href="combine.html">combine (function)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">LoomConnection (class)</a></li>
<li class="toctree-l2"><a class="reference internal" href="layer_manager.html">LayerManager (class)</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory_loom_layer.html">MemoryLoomLayer (class)</a></li>
<li class="toctree-l2"><a class="reference internal" href="loom_layer.html">LoomLayer (class)</a></li>
<li class="toctree-l2"><a class="reference internal" href="view_manager.html">ViewManager (class)</a></li>
<li class="toctree-l2"><a class="reference internal" href="loom_view.html">LoomView (class)</a></li>
<li class="toctree-l2"><a class="reference internal" href="loom_validator.html">LoomValidator (class)</a></li>
</ul>
</li>
</ul>

</div>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  <div class="section" id="loomconnection-class">
<h1>LoomConnection (class)<a class="headerlink" href="#loomconnection-class" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="loompy.loompy.LoomConnection">
<em class="property">class </em><code class="sig-prename descclassname">loompy.loompy.</code><code class="sig-name descname">LoomConnection</code><span class="sig-paren">(</span><em class="sig-param">filename: str</em>, <em class="sig-param">mode: str = 'r+'</em>, <em class="sig-param">*</em>, <em class="sig-param">validate: bool = True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection" title="Permalink to this definition">¶</a></dt>
<dd><p>A connection to a Loom file on disk. Typically LoomConnection objects are created using one of the
functions on the loompy module, such as <a class="reference internal" href="connect.html#loompy.connect" title="loompy.connect"><code class="xref py py-func docutils literal notranslate"><span class="pre">loompy.connect()</span></code></a> or <a class="reference internal" href="new.html#loompy.new" title="loompy.new"><code class="xref py py-func docutils literal notranslate"><span class="pre">loompy.new()</span></code></a>. LoomConnection
objects are context managers and should normally be
wrapped in a <code class="docutils literal notranslate"><span class="pre">with</span></code> block:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">loompy</span>
<span class="k">with</span> <span class="n">loompy</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;mydata.loom&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">ds</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">ca</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</pre></div>
</div>
<p>Inside the <code class="docutils literal notranslate"><span class="pre">with</span></code> block, you can access the dataset (here using the variable <code class="docutils literal notranslate"><span class="pre">ds</span></code>). When execution
leaves the <code class="docutils literal notranslate"><span class="pre">with</span></code> block, the connection is automatically closed, freeing up resources.</p>
<dl class="method">
<dt id="loompy.loompy.LoomConnection.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">filename: str</em>, <em class="sig-param">mode: str = 'r+'</em>, <em class="sig-param">*</em>, <em class="sig-param">validate: bool = True</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Establish a connection to a Loom file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – Name of the .loom file to open</p></li>
<li><p><strong>mode</strong> – read/write mode, accepts ‘r+’ (read/write) or
‘r’ (read-only), defaults to ‘r+’ without arguments,
and to ‘r’ with incorrect arguments</p></li>
<li><p><strong>validate</strong> – Validate that the file conforms with the Loom specification</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Nothing.</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="loompy.loompy.LoomConnection.filename">
<code class="sig-name descname">filename</code><em class="property"> = None</em><a class="headerlink" href="#loompy.loompy.LoomConnection.filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the file (as given when the LoomConnection was created)</p>
</dd></dl>

<dl class="attribute">
<dt id="loompy.loompy.LoomConnection.shape">
<code class="sig-name descname">shape</code><em class="property"> = None</em><a class="headerlink" href="#loompy.loompy.LoomConnection.shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Shape of the dataset (n_rows, n_cols)</p>
</dd></dl>

<dl class="attribute">
<dt id="loompy.loompy.LoomConnection.view">
<code class="sig-name descname">view</code><em class="property"> = None</em><a class="headerlink" href="#loompy.loompy.LoomConnection.view" title="Permalink to this definition">¶</a></dt>
<dd><p>100]``</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Create a view of the file by slicing this attribute, like <a href="#id1"><span class="problematic" id="id2">``</span></a>ds.view[</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>100,</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="loompy.loompy.LoomConnection.ra">
<code class="sig-name descname">ra</code><em class="property"> = None</em><a class="headerlink" href="#loompy.loompy.LoomConnection.ra" title="Permalink to this definition">¶</a></dt>
<dd><p>Row attributes, dict-like with np.ndarray values</p>
</dd></dl>

<dl class="attribute">
<dt id="loompy.loompy.LoomConnection.ca">
<code class="sig-name descname">ca</code><em class="property"> = None</em><a class="headerlink" href="#loompy.loompy.LoomConnection.ca" title="Permalink to this definition">¶</a></dt>
<dd><p>Column attributes, dict-like with np.ndarray values</p>
</dd></dl>

<dl class="attribute">
<dt id="loompy.loompy.LoomConnection.attrs">
<code class="sig-name descname">attrs</code><em class="property"> = None</em><a class="headerlink" href="#loompy.loompy.LoomConnection.attrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Global attributes</p>
</dd></dl>

<dl class="attribute">
<dt id="loompy.loompy.LoomConnection.row_graphs">
<code class="sig-name descname">row_graphs</code><em class="property"> = None</em><a class="headerlink" href="#loompy.loompy.LoomConnection.row_graphs" title="Permalink to this definition">¶</a></dt>
<dd><p>Row graphs, dict-like with values that are <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.coo_matrix.html#scipy.sparse.coo_matrix" title="(in SciPy v1.3.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">scipy.sparse.coo_matrix</span></code></a> objects</p>
</dd></dl>

<dl class="attribute">
<dt id="loompy.loompy.LoomConnection.col_graphs">
<code class="sig-name descname">col_graphs</code><em class="property"> = None</em><a class="headerlink" href="#loompy.loompy.LoomConnection.col_graphs" title="Permalink to this definition">¶</a></dt>
<dd><p>Column graphs, dict-like with values that are <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.coo_matrix.html#scipy.sparse.coo_matrix" title="(in SciPy v1.3.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">scipy.sparse.coo_matrix</span></code></a> objects</p>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.mode">
<em class="property">property </em><code class="sig-name descname">mode</code><a class="headerlink" href="#loompy.loompy.LoomConnection.mode" title="Permalink to this definition">¶</a></dt>
<dd><p>The access mode of the connection (‘r’ or ‘r+’)</p>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.last_modified">
<code class="sig-name descname">last_modified</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; str<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.last_modified"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.last_modified" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an ISO8601 timestamp indicating when the file was last modified</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An ISO8601 timestamp indicating when the file was last modified</p>
</dd>
</dl>
<dl class="simple">
<dt>Remarks:</dt><dd><p>If the file has no timestamp, and mode is ‘r+’, a new timestamp is created and returned.
Otherwise, the current time in UTC is returned</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.get_changes_since">
<code class="sig-name descname">get_changes_since</code><span class="sig-paren">(</span><em class="sig-param">timestamp: str</em><span class="sig-paren">)</span> &#x2192; Dict[str, List]<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.get_changes_since"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.get_changes_since" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a summary of the parts of the file that changed since the given time</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timestamp</strong> – ISO8601 timestamp</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary like <code class="docutils literal notranslate"><span class="pre">{&quot;row_graphs&quot;:</span> <span class="pre">rg,</span> <span class="pre">&quot;col_graphs&quot;:</span> <span class="pre">cg,</span> <span class="pre">&quot;row_attrs&quot;:</span> <span class="pre">ra,</span> <span class="pre">&quot;col_attrs&quot;:</span> <span class="pre">ca,</span> <span class="pre">&quot;layers&quot;:</span> <span class="pre">layers}</span></code> listing the names of objects that were modified since the given time</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.sparse">
<code class="sig-name descname">sparse</code><span class="sig-paren">(</span><em class="sig-param">rows: numpy.ndarray = None</em>, <em class="sig-param">cols: numpy.ndarray = None</em>, <em class="sig-param">layer: str = None</em><span class="sig-paren">)</span> &#x2192; scipy.sparse.coo.coo_matrix<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.sparse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.sparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the main matrix or specified layer as a scipy.sparse.coo_matrix, without loading dense matrix in RAM</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rows</strong> – Rows to include, or None to include all</p></li>
<li><p><strong>cols</strong> – Columns to include, or None to include all</p></li>
<li><p><strong>layer</strong> – Layer to return, or None to return the default layer</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Sparse matrix (<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.coo_matrix.html#scipy.sparse.coo_matrix" title="(in SciPy v1.3.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">scipy.sparse.coo_matrix</span></code></a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><em class="sig-param">suppress_warning: bool = False</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the connection. After this, the connection object becomes invalid. Warns user if called after closing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>suppress_warning</strong> – Suppresses warning message if True (defaults to false)</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.closed">
<em class="property">property </em><code class="sig-name descname">closed</code><a class="headerlink" href="#loompy.loompy.LoomConnection.closed" title="Permalink to this definition">¶</a></dt>
<dd><p>True if the connection is closed.</p>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.add_columns">
<code class="sig-name descname">add_columns</code><span class="sig-paren">(</span><em class="sig-param">layers: Union[numpy.ndarray, Dict[str, numpy.ndarray], loompy.layer_manager.LayerManager], col_attrs: Dict[str, numpy.ndarray], *, row_attrs: Dict[str, numpy.ndarray] = None, fill_values: Dict[str, numpy.ndarray] = None</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.add_columns"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.add_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Add columns of data and attribute values to the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>layers</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a><em> or </em><a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.17)"><em>numpy.ndarray</em></a><em> or </em><a class="reference internal" href="layer_manager.html#loompy.LayerManager" title="loompy.LayerManager"><em>LayerManager</em></a>) – Either:
1) A N-by-M matrix of float32s (N rows, M columns) in this case columns are added at the default layer
2) A dict {layer_name : matrix} specified so that the matrix (N, M) will be added to layer <cite>layer_name</cite>
3) A LayerManager object (such as what is returned by view.layers)</p></li>
<li><p><strong>col_attrs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – Column attributes, where keys are attribute names and values are numpy arrays (float or string) of length M</p></li>
<li><p><strong>row_attrs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – Optional row attributes, where keys are attribute names and values are numpy arrays (float or string) of length M</p></li>
<li><p><strong>fill_values</strong> – dictionary of values to use if a column attribute is missing, or “auto” to fill with zeros or empty strings</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Nothing.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul class="simple">
<li><p>This will modify the underlying HDF5 file, which will interfere with any concurrent readers.</p></li>
<li><p>Column attributes in the file that are NOT provided, will be deleted (unless fill value provided).</p></li>
<li><p>Array with Nan should not be provided</p></li>
</ul>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.add_loom">
<code class="sig-name descname">add_loom</code><span class="sig-paren">(</span><em class="sig-param">other_file: str</em>, <em class="sig-param">key: str = None</em>, <em class="sig-param">fill_values: Dict[str</em>, <em class="sig-param">numpy.ndarray] = None</em>, <em class="sig-param">batch_size: int = 1000</em>, <em class="sig-param">convert_attrs: bool = False</em>, <em class="sig-param">include_graphs: bool = False</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.add_loom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.add_loom" title="Permalink to this definition">¶</a></dt>
<dd><p>Add the content of another loom file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other_file</strong> – filename of the loom file to append</p></li>
<li><p><strong>key</strong> – Primary key to use to align rows in the other file with this file</p></li>
<li><p><strong>fill_values</strong> – default values to use for missing attributes (or None to drop missing attrs, or ‘auto’ to fill with sensible defaults)</p></li>
<li><p><strong>batch_size</strong> – the batch size used by batchscan (limits the number of rows/columns read in memory)</p></li>
<li><p><strong>convert_attrs</strong> – convert file attributes that differ between files into column attributes</p></li>
<li><p><strong>include_graphs</strong> – if true, include all the column graphs from other_file that are also present in this file</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Nothing, but adds the loom file. Note that the other loom file must have exactly the same
number of rows, and must have exactly the same column attributes.
Adds all the contents including layers but ignores layers in <cite>other_file</cite> that are not already present in self
Note that graphs are normally not added, unless include_graphs == True, in which case column graphs are added</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.scan">
<code class="sig-name descname">scan</code><span class="sig-paren">(</span><em class="sig-param">*, items: numpy.ndarray = None, axis: int = None, layers: Iterable = None, key: str = None, batch_size: int = 512, what: List[str] = ['col_attrs', 'row_attrs', 'layers', 'col_graphs', 'row_graphs']</em><span class="sig-paren">)</span> &#x2192; Iterable[Tuple[int, numpy.ndarray, loompy.loom_view.LoomView]]<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.scan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Scan across one axis and return batches of rows (columns) as LoomView objects</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>items</strong> (<em>np.ndarray</em>) – the indexes [0, 2, 13, … ,973] of the rows/cols to include along the axis
OR: boolean mask array giving the rows/cols to include</p></li>
<li><p><strong>axis</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – 0:rows or 1:cols</p></li>
<li><p><strong>batch_size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – the chuncks returned at every element of the iterator</p></li>
<li><p><strong>layers</strong> (<em>iterable</em>) – if specified it will batch scan only across some of the layers of the loom file
if layers == None, all layers will be scanned
if layers == [“”] or “”, only the default layer will be scanned</p></li>
<li><p><strong>key</strong> – Name of primary key attribute. If specified, return the values sorted by the key</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>Iterable that yields triplets of (ix, indexes, view) where</em></p></li>
<li><p><strong>ix</strong> (<em>int</em>) – first position / how many rows/cols have been yielded alredy</p></li>
<li><p><strong>indexes</strong> (<em>np.ndarray[int]</em>) – the indexes with the same numbering of the input args cells / genes (i.e. <code class="docutils literal notranslate"><span class="pre">np.arange(len(ds.shape[axis]))</span></code>)
this is <code class="docutils literal notranslate"><span class="pre">ix</span> <span class="pre">+</span> <span class="pre">selection</span></code></p></li>
<li><p><strong>view</strong> (<em>LoomView</em>) – a view corresponding to the current chunk</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.map">
<code class="sig-name descname">map</code><span class="sig-paren">(</span><em class="sig-param">f_list: List[Callable[[numpy.ndarray], int]], *, axis: int = 0, chunksize: int = 1000, selection: numpy.ndarray = None</em><span class="sig-paren">)</span> &#x2192; List[numpy.ndarray]<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.map" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a function along an axis without loading the entire dataset in memory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>f</strong> – Function(s) that takes a numpy ndarray as argument</p></li>
<li><p><strong>axis</strong> – Axis along which to apply the function (0 = rows, 1 = columns)</p></li>
<li><p><strong>chunksize</strong> – Number of rows (columns) to load per chunk</p></li>
<li><p><strong>selection</strong> – Columns (rows) to include</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy.ndarray result of function application
The result is a list of numpy arrays, one per supplied function in f_list.
This is more efficient than repeatedly calling map() one function at a time.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.permute">
<code class="sig-name descname">permute</code><span class="sig-paren">(</span><em class="sig-param">ordering: numpy.ndarray</em>, <em class="sig-param">axis: int</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.permute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.permute" title="Permalink to this definition">¶</a></dt>
<dd><p>Permute the dataset along the indicated axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ordering</strong> (<em>list of int</em>) – The desired order along the axis</p></li>
<li><p><strong>axis</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The axis along which to permute</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Nothing.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.aggregate">
<code class="sig-name descname">aggregate</code><span class="sig-paren">(</span><em class="sig-param">out_file: str = None</em>, <em class="sig-param">select: numpy.ndarray = None</em>, <em class="sig-param">group_by: Union[str</em>, <em class="sig-param">numpy.ndarray] = 'Clusters'</em>, <em class="sig-param">aggr_by: str = 'mean'</em>, <em class="sig-param">aggr_ca_by: Dict[str</em>, <em class="sig-param">str] = None</em><span class="sig-paren">)</span> &#x2192; numpy.ndarray<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.aggregate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.aggregate" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregate the Loom file by applying aggregation functions to the main matrix as well as to the column attributes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>The name of the output Loom file</strong> (<em>out_file</em>) – </p></li>
<li><p><strong>Bool array giving the columns to include</strong> (<em>select</em>) – </p></li>
<li><p><strong>The column attribute to group by</strong><strong>, or </strong><strong>an np.ndarray of integer group labels</strong> (<em>group_by</em>) – </p></li>
<li><p><strong>The aggregation function for the main matrix</strong> (<em>aggr_by</em>) – </p></li>
<li><p><strong>A dictionary of aggregation functions for the column attributes</strong> (<em>aggr_ca_by</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>m                       Aggregated main matrix</p>
</dd>
</dl>
<dl>
<dt>Remarks:</dt><dd><p>aggr_by gives the aggregation function for the main matrix
aggr_ca_by is a dictionary with column attributes as keys and aggregation functionas as values</p>
<p>Aggregation functions can be any valid aggregation function from here: <a class="reference external" href="https://github.com/ml31415/numpy-groupies">https://github.com/ml31415/numpy-groupies</a></p>
<dl class="simple">
<dt>In addition, you can specify:</dt><dd><p>“tally” to count the number of occurences of each value of a categorical attribute</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="loompy.loompy.LoomConnection.export">
<code class="sig-name descname">export</code><span class="sig-paren">(</span><em class="sig-param">out_file: str</em>, <em class="sig-param">layer: str = None</em>, <em class="sig-param">format: str = 'tab'</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="../_modules/loompy/loompy.html#LoomConnection.export"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#loompy.loompy.LoomConnection.export" title="Permalink to this definition">¶</a></dt>
<dd><p>Export the specified layer and row/col attributes as tab-delimited file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>out_file</strong> – Path to the output file</p></li>
<li><p><strong>layer</strong> – Name of the layer to export, or None to export the main matrix</p></li>
<li><p><strong>format</strong> – Desired file format (only ‘tab’ is supported)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017, LinnarssonLab.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.0.<br/>
    </p>
  </div>
</footer>
  </body>
</html>